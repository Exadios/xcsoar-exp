cmake_minimum_required(VERSION 2.8.5)

project(XCSoar)

set(dialog_sources
    Dialogs/XML.cpp
    Dialogs/Inflate.cpp
    Dialogs/Message.cpp
    Dialogs/ListPicker.cpp
    Dialogs/JobDialog.cpp
    Dialogs/WidgetDialog.cpp
    Dialogs/FileManager.cpp
    Dialogs/Device/DeviceEditWidget.cpp
    Dialogs/Device/DeviceListDialog.cpp
    Dialogs/Device/PortMonitor.cpp
    Dialogs/Device/ManageCAI302Dialog.cpp
    Dialogs/Device/CAI302/UnitsEditor.cpp
    Dialogs/Device/CAI302/WaypointUploader.cpp
    Dialogs/Device/ManageFlarmDialog.cpp
    Dialogs/Device/LX/ManageV7Dialog.cpp
    Dialogs/Device/LX/V7ConfigWidget.cpp
    Dialogs/Device/LX/ManageNanoDialog.cpp
    Dialogs/Device/LX/NanoConfigWidget.cpp
    Dialogs/Device/LX/ManageLX16xxDialog.cpp
    Dialogs/Device/Vega/VegaParametersWidget.cpp
    Dialogs/Device/Vega/VegaConfigurationDialog.cpp
    Dialogs/Device/Vega/VegaDemoDialog.cpp
    Dialogs/Device/Vega/VoiceSettingsDialog.cpp
    Dialogs/Device/Vega/SwitchesDialog.cpp
    Dialogs/Device/FLARM/ConfigWidget.cpp
    Dialogs/MapItemListDialog.cpp
    Dialogs/MapItemListSettingsDialog.cpp
    Dialogs/MapItemListSettingsPanel.cpp
    Dialogs/ColorListDialog.cpp
    Dialogs/Airspace/dlgAirspace.cpp
    Dialogs/Airspace/dlgAirspacePatterns.cpp
    Dialogs/Airspace/dlgAirspaceDetails.cpp
    Dialogs/Airspace/AirspaceList.cpp
    Dialogs/Airspace/AirspaceCRendererSettingsDialog.cpp
    Dialogs/Airspace/AirspaceCRendererSettingsPanel.cpp
    Dialogs/Airspace/dlgAirspaceWarnings.cpp
    Dialogs/Settings/WindSettingsPanel.cpp
    Dialogs/Settings/WindSettingsDialog.cpp
    Dialogs/Settings/dlgBasicSettings.cpp
    Dialogs/Settings/dlgConfiguration.cpp
    Dialogs/Settings/dlgConfigInfoboxes.cpp
    Dialogs/Traffic/TrafficList.cpp
    Dialogs/Traffic/FlarmTrafficDetails.cpp
    Dialogs/Traffic/TeamCodeDialog.cpp
    Dialogs/dlgAnalysis.cpp
    Dialogs/dlgBrightness.cpp
    Dialogs/dlgChecklist.cpp
    Dialogs/Plane/PlaneListDialog.cpp
    Dialogs/Plane/PlaneDetailsDialog.cpp
    Dialogs/Plane/PlanePolarDialog.cpp
    Dialogs/Plane/PolarShapeEditWidget.cpp
    Dialogs/DataField.cpp
    Dialogs/ComboPicker.cpp
    Dialogs/FilePicker.cpp
    Dialogs/HelpDialog.cpp
    Dialogs/dlgInfoBoxAccess.cpp
    Dialogs/ReplayDialog.cpp
    Dialogs/dlgSimulatorPrompt.cpp
    Dialogs/SimulatorPromptWindow.cpp
    Dialogs/dlgStartup.cpp
    Dialogs/dlgStatus.cpp
    Dialogs/StatusPanels/StatusPanel.cpp
    Dialogs/StatusPanels/FlightStatusPanel.cpp
    Dialogs/StatusPanels/SystemStatusPanel.cpp
    Dialogs/StatusPanels/TaskStatusPanel.cpp
    Dialogs/StatusPanels/RulesStatusPanel.cpp
    Dialogs/StatusPanels/TimesStatusPanel.cpp
    Dialogs/Waypoint/WaypointInfoWidget.cpp
    Dialogs/Waypoint/WaypointCommandsWidget.cpp
    Dialogs/Waypoint/dlgWaypointDetails.cpp
    Dialogs/Waypoint/Manager.cpp
    Dialogs/Waypoint/dlgWaypointEdit.cpp
    Dialogs/Waypoint/WaypointList.cpp
    Dialogs/Waypoint/NearestWaypoint.cpp
    Dialogs/Settings/Panels/AirspaceConfigPanel.cpp
    Dialogs/Settings/Panels/ExperimentalConfigPanel.cpp
    Dialogs/Settings/Panels/GaugesConfigPanel.cpp
    Dialogs/Settings/Panels/VarioConfigPanel.cpp
    Dialogs/Settings/Panels/GlideComputerConfigPanel.cpp
    Dialogs/Settings/Panels/WindConfigPanel.cpp
    Dialogs/Settings/Panels/InfoBoxesConfigPanel.cpp
    Dialogs/Settings/Panels/InterfaceConfigPanel.cpp
    Dialogs/Settings/Panels/LayoutConfigPanel.cpp
    Dialogs/Settings/Panels/LoggerConfigPanel.cpp
    Dialogs/Settings/Panels/MapDisplayConfigPanel.cpp
    Dialogs/Settings/Panels/PagesConfigPanel.cpp
    Dialogs/Settings/Panels/RouteConfigPanel.cpp
    Dialogs/Settings/Panels/SafetyFactorsConfigPanel.cpp
    Dialogs/Settings/Panels/SiteConfigPanel.cpp
    Dialogs/Settings/Panels/SymbolsConfigPanel.cpp
    Dialogs/Settings/Panels/TaskRulesConfigPanel.cpp
    Dialogs/Settings/Panels/TaskDefaultsConfigPanel.cpp
    Dialogs/Settings/Panels/ScoringConfigPanel.cpp
    Dialogs/Settings/Panels/TerrainDisplayConfigPanel.cpp
    Dialogs/Settings/Panels/UnitsConfigPanel.cpp
    Dialogs/Settings/Panels/TimeConfigPanel.cpp
    Dialogs/Settings/Panels/WaypointDisplayConfigPanel.cpp
    Dialogs/Settings/Panels/TrackingConfigPanel.cpp
    Dialogs/Task/Widgets/ObservationZoneEditWidget.cpp
    Dialogs/Task/Widgets/CylinderZoneEditWidget.cpp
    Dialogs/Task/Widgets/LineSectorZoneEditWidget.cpp
    Dialogs/Task/Widgets/SectorZoneEditWidget.cpp
    Dialogs/Task/Widgets/KeyholeZoneEditWidget.cpp
    Dialogs/Task/Manager/TaskMapWindow.cpp
    Dialogs/Task/Manager/TaskManagerDialog.cpp
    Dialogs/Task/Manager/TaskClosePanel.cpp
    Dialogs/Task/Manager/TaskEditPanel.cpp
    Dialogs/Task/Manager/TaskPropertiesPanel.cpp
    Dialogs/Task/Manager/TaskMiscPanel.cpp
    Dialogs/Task/Manager/TaskActionsPanel.cpp
    Dialogs/Task/Manager/TaskListPanel.cpp
    Dialogs/Task/Manager/TaskCalculatorPanel.cpp
    Dialogs/Task/OptionalStartsDialog.cpp
    Dialogs/Task/TaskPointDialog.cpp
    Dialogs/Task/MutateTaskPointDialog.cpp
    Dialogs/Task/dlgTaskHelpers.cpp
    Dialogs/Task/TargetDialog.cpp
    Dialogs/Task/AlternatesListDialog.cpp
    Dialogs/NumberEntry.cpp
    Dialogs/TextEntry.cpp
    Dialogs/KnobTextEntry.cpp
    Dialogs/TouchTextEntry.cpp
    Dialogs/TimeEntry.cpp
    Dialogs/GeoPointEntry.cpp
    Dialogs/Weather/RASPDialog.cpp
    Dialogs/dlgCredits.cpp
    Dialogs/dlgQuickMenu.cpp)

if(HAVE_PCM_PLAYER)
  set(dialog_sources ${dialog_sources}
                     Dialogs/Settings/Panels/AudioVarioConfigPanel.cpp)
endif(HAVE_PCM_PLAYER)

if(HAVE_HTTP)
  set(dialog_sources ${dialog_sources}
                     Dialogs/Weather/NOAAList.cpp
                     Dialogs/Weather/NOAADetails.cpp)
endif(HAVE_HTTP)

set(xcsoar_cpp_sources
   IO/ConfiguredFile.cpp
	 IO/DataFile.cpp
   Airspace/ProtectedAirspaceWarningManager.cpp
   Airspace/ActivePredicate.cpp
   Task/Serialiser.cpp
   Task/Deserialiser.cpp
   Task/TaskFile.cpp
   Task/TaskFileXCSoar.cpp
   Task/TaskFileIGC.cpp
   Task/TaskFileSeeYou.cpp
   Task/MapTaskManager.cpp
   Task/ProtectedTaskManager.cpp
   Task/RoutePlannerGlue.cpp
   Task/ProtectedRoutePlanner.cpp
   Task/TaskStore.cpp
   Task/TypeStrings.cpp
   Task/ValidationErrorStrings.cpp
   RadioFrequency.cpp
   Engine/Navigation/TraceHistory.cpp
   Engine/Navigation/Aircraft.cpp
   Engine/Trace/Point.cpp
   Engine/Trace/Trace.cpp
   Engine/Trace/Vector.cpp
   Engine/Util/Gradient.cpp
   HorizonWidget.cpp
   Renderer/HorizonRenderer.cpp
   Renderer/GradientRenderer.cpp
   Renderer/GlassRenderer.cpp
   Renderer/TransparentRendererCache.cpp
   Renderer/LabelBlock.cpp
   Renderer/TextInBox.cpp
   Renderer/TraceHistoryRenderer.cpp
   Renderer/ThermalBandRenderer.cpp
   Renderer/TaskProgressRenderer.cpp
   Renderer/MarkerRenderer.cpp
   Airspace/AirspaceGlue.cpp
   Airspace/AirspaceParser.cpp
   Airspace/AirspaceVisibility.cpp
   Airspace/AirspaceComputerSettings.cpp
   Airspace/NearestAirspace.cpp
   Renderer/AirspaceRendererSettings.cpp
   Operation/Operation.cpp
   Operation/ProxyOperationEnvironment.cpp
   Operation/NoCancelOperationEnvironment.cpp
   Operation/PopupOperationEnvironment.cpp
   Operation/MessageOperationEnvironment.cpp
   Operation/ThreadedOperationEnvironment.cpp
   Operation/VerboseOperationEnvironment.cpp
   Atmosphere/Pressure.cpp
   Atmosphere/AirDensity.cpp
   Atmosphere/CuSonde.cpp
   Computer/ClimbAverageCalculator.cpp
   Computer/ConditionMonitor/ConditionMonitor.cpp
   Computer/ConditionMonitor/ConditionMonitorAATTime.cpp
   Computer/ConditionMonitor/ConditionMonitorFinalGlide.cpp
   Computer/ConditionMonitor/ConditionMonitorGlideTerrain.cpp
   Computer/ConditionMonitor/ConditionMonitorLandableReachable.cpp
   Computer/ConditionMonitor/ConditionMonitorStartRules.cpp
   Computer/ConditionMonitor/ConditionMonitorSunset.cpp
   Computer/ConditionMonitor/ConditionMonitorWind.cpp
   Computer/ConditionMonitor/ConditionMonitors.cpp
   Plane/PlaneGlue.cpp
   Plane/PlaneFileGlue.cpp
   FLARM/FlarmId.cpp
   FLARM/Error.cpp
   FLARM/List.cpp
   FLARM/FlarmNetRecord.cpp
   FLARM/FlarmNetDatabase.cpp
   FLARM/FlarmNetReader.cpp
   FLARM/Traffic.cpp
   FLARM/FlarmCalculations.cpp
   FLARM/Friends.cpp
   FLARM/FlarmComputer.cpp
   FLARM/Global.cpp
   FLARM/Glue.cpp
   Computer/CuComputer.cpp
   Computer/FlyingComputer.cpp
   Computer/CirclingComputer.cpp
   Computer/ThermalBandComputer.cpp
   Computer/Wind/Computer.cpp
   Computer/ContestComputer.cpp
   Computer/TraceComputer.cpp
   Computer/WarningComputer.cpp
   Computer/ThermalLocator.cpp
   Computer/ThermalBase.cpp
   Computer/LiftDatabaseComputer.cpp
   Computer/LogComputer.cpp
   Computer/AverageVarioComputer.cpp
   Computer/GlideRatioCalculator.cpp
   Computer/GlideRatioComputer.cpp
   Computer/GlideComputer.cpp
   Computer/GlideComputerBlackboard.cpp
   Computer/GlideComputerAirData.cpp
   Computer/WaveComputer.cpp
   Computer/StatsComputer.cpp
   Computer/RouteComputer.cpp
   Computer/TaskComputer.cpp
   Computer/GlideComputerInterface.cpp
   Computer/Events.cpp
   BallastDumpManager.cpp
   Logger/Settings.cpp
   Logger/Logger.cpp
   Logger/LoggerFRecord.cpp
   Logger/GRecord.cpp
   Logger/LoggerEPE.cpp
   Logger/LoggerImpl.cpp
   Logger/IGCFileCleanup.cpp
   IGC/IGCFix.cpp
   IGC/IGCWriter.cpp
   IGC/IGCString.cpp
   IGC/Generator.cpp
   Logger/MD5.cpp
   Logger/NMEALogger.cpp
   Logger/ExternalLogger.cpp
   Logger/FlightLogger.cpp
   Logger/GlueFlightLogger.cpp
   NMEA/Info.cpp
   NMEA/MoreData.cpp
   NMEA/Acceleration.cpp
   NMEA/Attitude.cpp
   NMEA/ExternalSettings.cpp
   NMEA/FlyingState.cpp
   NMEA/Derived.cpp
   NMEA/VarioInfo.cpp
   NMEA/ClimbInfo.cpp
   NMEA/CirclingInfo.cpp
   NMEA/ThermalBand.cpp
   NMEA/ThermalLocator.cpp
   NMEA/ClimbHistory.cpp
   NMEA/SwitchState.cpp
   NMEA/InputLine.cpp
   NMEA/Checksum.cpp
   NMEA/Aircraft.cpp
   Replay/Replay.cpp
   IGC/IGCParser.cpp
   Replay/IgcReplay.cpp
   Replay/NmeaReplay.cpp
   Replay/DemoReplay.cpp
   Replay/DemoReplayGlue.cpp
   Replay/TaskAutoPilot.cpp
   Replay/AircraftSim.cpp
   TeamCode/TeamCode.cpp
   TeamCode/Settings.cpp
   TeamActions.cpp
   Waypoint/WaypointList.cpp
   Waypoint/WaypointListBuilder.cpp
   Waypoint/WaypointFilter.cpp
   Waypoint/WaypointGlue.cpp
   Waypoint/LastUsed.cpp
   Waypoint/HomeGlue.cpp
   Waypoint/WaypointFileType.cpp
   Waypoint/WaypointReader.cpp
   Waypoint/WaypointReaderBase.cpp
   Waypoint/WaypointReaderOzi.cpp
   Waypoint/WaypointReaderFS.cpp
   Waypoint/WaypointReaderWinPilot.cpp
   Waypoint/WaypointReaderSeeYou.cpp
   Waypoint/WaypointReaderZander.cpp
   Waypoint/WaypointReaderCompeGPS.cpp
   Waypoint/WaypointWriter.cpp
   Computer/Wind/CirclingWind.cpp
   Computer/Wind/MeasurementList.cpp
   Computer/Wind/Store.cpp
   Computer/Wind/WindEKF.cpp
   Computer/Wind/WindEKFGlue.cpp
   Computer/Wind/Settings.cpp
   CrossSection/AirspaceXSRenderer.cpp
   CrossSection/TerrainXSRenderer.cpp
   CrossSection/CrossSectionRenderer.cpp
   CrossSection/CrossSectionWindow.cpp
   CrossSection/CrossSectionWidget.cpp
   Gauge/ThermalAssistantRenderer.cpp
   Gauge/ThermalAssistantWindow.cpp
   Gauge/BigThermalAssistantWindow.cpp
   Gauge/BigThermalAssistantWidget.cpp
   Gauge/FlarmTrafficWindow.cpp
   Gauge/BigTrafficWidget.cpp
   Look/FlarmTrafficLook.cpp
   Gauge/GaugeFLARM.cpp
   Gauge/GaugeThermalAssistant.cpp
   Gauge/VarioSettings.cpp
   Gauge/TrafficSettings.cpp
   Gauge/GaugeVario.cpp
   Gauge/GlueGaugeVario.cpp
   Gauge/TaskView.cpp
   Gauge/LogoView.cpp
   Waypoint/WaypointDetailsReader.cpp
   Menu/MenuData.cpp
   Menu/MenuBar.cpp
   Menu/ButtonLabel.cpp
   Menu/ExpandMacros.cpp
   InfoBoxes/Content/Factory.cpp
   InfoBoxes/Content/Alternate.cpp
   InfoBoxes/Content/Base.cpp
   InfoBoxes/Content/Altitude.cpp
   InfoBoxes/Content/Direction.cpp
   InfoBoxes/Content/Glide.cpp
   InfoBoxes/Content/MacCready.cpp
   InfoBoxes/Content/Other.cpp
   InfoBoxes/Content/Speed.cpp
   InfoBoxes/Content/Task.cpp
   InfoBoxes/Content/Places.cpp
   InfoBoxes/Content/Contest.cpp
   InfoBoxes/Content/Team.cpp
   InfoBoxes/Content/Terrain.cpp
   InfoBoxes/Content/Thermal.cpp
   InfoBoxes/Content/Time.cpp
   InfoBoxes/Content/Trace.cpp
   InfoBoxes/Content/Weather.cpp
   InfoBoxes/Content/Airspace.cpp
   InfoBoxes/Data.cpp
   InfoBoxes/Format.cpp
   InfoBoxes/Units.cpp
   InfoBoxes/InfoBoxSettings.cpp
   InfoBoxes/InfoBoxWindow.cpp
   InfoBoxes/InfoBoxLayout.cpp
   InfoBoxes/InfoBoxManager.cpp
   InfoBoxes/Panel/AltitudeInfo.cpp
   InfoBoxes/Panel/AltitudeSimulator.cpp
   InfoBoxes/Panel/AltitudeSetup.cpp
   InfoBoxes/Panel/MacCreadyEdit.cpp
   InfoBoxes/Panel/MacCreadySetup.cpp
   InfoBoxes/Panel/WindEdit.cpp
   InfoBoxes/Panel/ATCReference.cpp
   Pan.cpp
   Input/InputConfig.cpp
   Input/InputDefaults.cpp
   Input/InputEvents.cpp
   Input/InputEventsActions.cpp
   Input/InputEventsDevice.cpp
   Input/InputEventsVega.cpp
   Input/InputEventsInfoBox.cpp
   Input/InputEventsMap.cpp
   Input/InputEventsPage.cpp
   Input/InputEventsAirspace.cpp
   Input/InputEventsTask.cpp
   Input/InputEventsSettings.cpp
   Input/InputEventsThermalAssistant.cpp
   Input/InputEventsTraffic.cpp
   Input/InputQueue.cpp
   Input/InputLookup.cpp
   Input/InputKeys.cpp
   Input/InputParser.cpp
   Input/TaskEventObserver.cpp
   PageSettings.cpp
   PageState.cpp
   PageActions.cpp
   StatusMessage.cpp
   PopupMessage.cpp
   Message.cpp
   LogFile.cpp
   Geo/Geoid.cpp
   MapWindow/MapCanvas.cpp
   MapWindow/StencilMapCanvas.cpp
   Projection/Projection.cpp
   Projection/WindowProjection.cpp
   Projection/CompareProjection.cpp
   Renderer/ChartRenderer.cpp
   Renderer/BackgroundRenderer.cpp
   Renderer/FAITriangleAreaRenderer.cpp
   Renderer/OZRenderer.cpp
   Renderer/TaskPointRenderer.cpp
   Renderer/TaskRenderer.cpp
   Renderer/AircraftRenderer.cpp
   Renderer/AirspaceRenderer.cpp
   Renderer/AirspaceRendererGL.cpp
   Renderer/AirspaceRendererOther.cpp
   Renderer/AirspaceListRenderer.cpp
   Renderer/AirspacePreviewRenderer.cpp
   Renderer/BestCruiseArrowRenderer.cpp
   Renderer/CompassRenderer.cpp
   Renderer/FinalGlideBarRenderer.cpp
   Renderer/VarioBarRenderer.cpp
   Renderer/MapItemListRenderer.cpp
   Renderer/OZPreviewRenderer.cpp
   Renderer/TrackLineRenderer.cpp
   Renderer/TrafficRenderer.cpp
   Renderer/TrailRenderer.cpp
   Renderer/UnitSymbolRenderer.cpp
   Renderer/WaypointListRenderer.cpp
   Renderer/WaypointIconRenderer.cpp
   Renderer/WaypointRenderer.cpp
   Renderer/WaypointRendererSettings.cpp
   Renderer/WaypointLabelList.cpp
   Renderer/WindArrowRenderer.cpp
   Renderer/WaveRenderer.cpp
   Projection/ChartProjection.cpp
   MapWindow/Items/MapItem.cpp
   MapWindow/Items/List.cpp
   MapWindow/Items/Builder.cpp
   MapWindow/MapWindow.cpp
   MapWindow/MapWindowEvents.cpp
   MapWindow/MapWindowGlideRange.cpp
   Projection/MapWindowProjection.cpp
   MapWindow/MapWindowRender.cpp
   MapWindow/MapWindowSymbols.cpp
   MapWindow/MapWindowContest.cpp
   MapWindow/MapWindowTask.cpp
   MapWindow/MapWindowThermal.cpp
   MapWindow/MapWindowTraffic.cpp
   MapWindow/MapWindowTrail.cpp
   MapWindow/MapWindowWaypoints.cpp
   MapWindow/GlueMapWindow.cpp
   MapWindow/GlueMapWindowItems.cpp
   MapWindow/GlueMapWindowEvents.cpp
   MapWindow/GlueMapWindowOverlays.cpp
   MapWindow/GlueMapWindowDisplayMode.cpp
   MapWindow/TargetMapWindow.cpp
   MapWindow/TargetMapWindowEvents.cpp
   MapWindow/TargetMapWindowDrag.cpp
   UIUtil/GestureManager.cpp
   UIUtil/TrackingGestureManager.cpp
   DrawThread.cpp
   Computer/BasicComputer.cpp
   Computer/GroundSpeedComputer.cpp
   Computer/AutoQNH.cpp
   Blackboard/BlackboardListener.cpp
   Blackboard/ProxyBlackboardListener.cpp
   Blackboard/RateLimitedBlackboardListener.cpp
   Blackboard/LiveBlackboard.cpp
   Blackboard/InterfaceBlackboard.cpp
   Blackboard/ScopeGPSListener.cpp
   Blackboard/ScopeCalculatedListener.cpp
   Blackboard/DeviceBlackboard.cpp
   MapWindow/MapWindowBlackboard.cpp
   Dialogs/DialogSettings.cpp
   UIReceiveBlackboard.cpp
   UIGlobals.cpp
   UIState.cpp
   UISettings.cpp
   DisplaySettings.cpp
   MapSettings.cpp
   SystemSettings.cpp
   Audio/Settings.cpp
   Audio/VarioSettings.cpp
   Computer/Settings.cpp
   MergeThread.cpp
   CalculationThread.cpp
   DisplayMode.cpp
   Topography/TopographyFile.cpp
   Topography/TopographyStore.cpp
   Topography/TopographyFileRenderer.cpp
   Topography/TopographyRenderer.cpp
   Topography/TopographyGlue.cpp
   Topography/XShape.cpp
   Topography/CachedTopographyRenderer.cpp
   Markers/Markers.cpp
   Markers/ProtectedMarkers.cpp
   FlightStatistics.cpp
   FlightInfo.cpp
   Renderer/FlightStatisticsRenderer.cpp
   Renderer/BarographRenderer.cpp
   Renderer/ClimbChartRenderer.cpp
   Renderer/GlidePolarRenderer.cpp
   Renderer/WindChartRenderer.cpp
   Renderer/CuRenderer.cpp
   Simulator.cpp
   Asset.cpp
   Hardware/CPU.cpp
   Hardware/Display.cpp
   Hardware/RotateDisplay.cpp
   Hardware/DisplayDPI.cpp
   Hardware/BlankDisplay.cpp
   Hardware/DisplayGlue.cpp
   Hardware/Vibrator.cpp
   Language/MOFile.cpp
   Language/Language.cpp
   Language/LanguageGlue.cpp
   LocalPath.cpp
   UIActions.cpp
   Interface.cpp
   ActionInterface.cpp
   ProgressWindow.cpp
   ProgressGlue.cpp
   Units/Units.cpp
   Units/UnitsGlue.cpp
   Units/UnitsStore.cpp
   Formatter/Units.cpp
   Formatter/UserUnits.cpp
   Formatter/HexColor.cpp
   Formatter/GlideRatioFormatter.cpp
   Formatter/GeoPointFormatter.cpp
   Formatter/ByteSizeFormatter.cpp
   Formatter/UserGeoPointFormatter.cpp
   Formatter/TimeFormatter.cpp
   Formatter/LocalTimeFormatter.cpp
   Formatter/IGCFilenameFormatter.cpp
   Formatter/AirspaceFormatter.cpp
   Formatter/AirspaceUserUnitsFormatter.cpp
   Units/Descriptor.cpp
   Units/System.cpp
   Units/Settings.cpp
   Formatter/AngleFormatter.cpp
   FLARM/FlarmDetails.cpp
   FLARM/NameDatabase.cpp
   FLARM/NameFile.cpp
   FLARM/TrafficDatabases.cpp
   UtilsSettings.cpp
   UtilsSystem.cpp
   OS/LogError.cpp
   Version.cpp
   Audio/Sound.cpp
   Audio/VegaVoice.cpp
   Audio/VegaVoiceSettings.cpp
   Compatibility/fmode.c
   Profile/Profile.cpp
   Profile/Earth.cpp
   Profile/Screen.cpp
   Profile/TrackingProfile.cpp
   Profile/SystemProfile.cpp
   Profile/ComputerProfile.cpp
   Profile/RouteProfile.cpp
   Profile/ContestProfile.cpp
   Profile/TaskProfile.cpp
   Profile/ContestProfile.cpp
   Profile/MapProfile.cpp
   Profile/PageProfile.cpp
   Profile/UIProfile.cpp
   Profile/ProfileGlue.cpp
   Profile/ProfileKeys.cpp
   Profile/FontConfig.cpp
   Profile/UnitsConfig.cpp
   Profile/DeviceConfig.cpp
   Profile/InfoBoxConfig.cpp
   Profile/AirspaceConfig.cpp
   Profile/TerrainConfig.cpp
   Profile/FlarmProfile.cpp
   XML/Node.cpp
   XML/Parser.cpp
   XML/Writer.cpp
   XML/DataNode.cpp
   XML/DataNodeXML.cpp
   Repository/FileRepository.cpp
   Repository/Parser.cpp
   Job/Thread.cpp
   Job/Async.cpp
   RateLimiter.cpp
   Tracking/TrackingSettings.cpp
   Math/Screen.cpp
   Math/SunEphemeris.cpp
   Screen/Blank.cpp
   Screen/Layout.cpp
   Screen/UnitSymbol.cpp
   Screen/Ramp.cpp
   Screen/TerminalWindow.cpp
   Look/GlobalFonts.cpp
   Look/AutoFont.cpp
   Look/DefaultFonts.cpp
   Look/Look.cpp
   Look/DialogLook.cpp
   Look/ButtonLook.cpp
   Look/TerminalLook.cpp
   Look/VarioLook.cpp
   Look/ChartLook.cpp
   Look/MapLook.cpp
   Look/WindArrowLook.cpp
   Look/ThermalBandLook.cpp
   Look/TraceHistoryLook.cpp
   Look/AirspaceLook.cpp
   Look/TrailLook.cpp
   Look/CrossSectionLook.cpp
   Look/GestureLook.cpp
   Look/HorizonLook.cpp
   Look/TaskLook.cpp
   Look/TrafficLook.cpp
   Look/InfoBoxLook.cpp
   Look/WaypointLook.cpp
   Look/AircraftLook.cpp
   Look/MarkerLook.cpp
   Look/NOAALook.cpp
   Look/FinalGlideBarLook.cpp
   Look/VarioBarLook.cpp
   Look/IconLook.cpp
   Look/UnitsLook.cpp
   Look/ThermalAssistantLook.cpp
   Look/WaveLook.cpp
   Polar/PolarGlue.cpp
   Polar/PolarFileGlue.cpp
   Polar/Shape.cpp
   Polar/Polar.cpp
   Polar/Parser.cpp
   Polar/PolarStore.cpp
   Protection.cpp
   BatteryTimer.cpp
   ProcessTimer.cpp
   ApplyExternalSettings.cpp
   ApplyVegaSwitches.cpp
   MainWindow.cpp
   Startup.cpp
   Components.cpp
   Device/Driver.cpp
   Device/Declaration.cpp
   Device/Register.cpp
   Device/MultipleDevices.cpp
   Device/device.cpp
   Device/Port/ConfiguredPort.cpp
   Device/Descriptor.cpp
   Device/Dispatcher.cpp
   Device/Parser.cpp
   Device/Simulator.cpp
   Device/Util/LineSplitter.cpp
   Device/Util/NMEAWriter.cpp
   Device/Util/NMEAReader.cpp
   Device/Config.cpp
	${DIALOG_SOURCES}
   XCSoar.cpp
   Monitor/TaskAdvanceMonitor.cpp
   Monitor/MatTaskMonitor.cpp
   Monitor/AllMonitors.cpp
   Hardware/Battery.cpp
   Tracking/SkyLines/Client.cpp
   Tracking/SkyLines/Glue.cpp
   Tracking/TrackingGlue.cpp
   Net/CURL/Multi.cpp
   Net/CURL/Session.cpp
   Net/CURL/Request.cpp
   Net/CURL/Init.cpp
   Net/DownloadManager.cpp
   Net/ToFile.cpp
   Net/ToBuffer.cpp
   Time/DeltaTime.cpp
   Time/WrapClock.cpp
   Time/LocalTime.cpp
   Time/BrokenTime.cpp
   Time/BrokenDate.cpp
   Time/BrokenDateTime.cpp
   OS/Clock.cpp
   OS/SocketAddress.cpp
   OS/SocketDescriptor.cpp
   OS/FileDescriptor.cpp
   OS/FileMapping.cpp
   OS/FileUtil.cpp
   OS/PathName.cpp
   OS/Process.cpp
   OS/SystemLoad.cpp
   OS/Poll.cpp
   OS/EventPipe.cpp
   Poco/RWLock.cpp
   Thread/Thread.cpp
   Thread/SuspensibleThread.cpp
   Thread/RecursivelySuspensibleThread.cpp
   Thread/WorkerThread.cpp
   Thread/StandbyThread.cpp
   Thread/Mutex.cpp
   Thread/Debug.cpp
   Util/CRC.cpp
   Util/tstring.cpp
   Util/UTF8.cpp
   Util/EscapeBackslash.cpp
   Util/ConvertString.cpp
   Util/StaticString.cpp
   Util/StringUtil.cpp
   Geo/ConvexHull/GrahamScan.cpp
   Geo/ConvexHull/PolygonInterior.cpp
   Geo/Memento/DistanceMemento.cpp
   Geo/Memento/GeoVectorMemento.cpp
   Geo/Flat/FlatProjection.cpp
   Geo/Flat/TaskProjection.cpp
   Geo/Flat/FlatBoundingBox.cpp
   Geo/Flat/FlatGeoPoint.cpp
   Geo/Flat/FlatRay.cpp
   Geo/Flat/FlatPoint.cpp
   Geo/Flat/FlatEllipse.cpp
   Geo/Flat/FlatLine.cpp
   Geo/Math.cpp
   Geo/GeoPoint.cpp
   Geo/GeoVector.cpp
   Geo/GeoBounds.cpp
   Geo/GeoClip.cpp
   Geo/SearchPoint.cpp
   Geo/SearchPointVector.cpp
   Geo/GeoEllipse.cpp
   Geo/UTM.cpp
   Math/Angle.cpp
   Math/ARange.cpp
   Math/FastRotation.cpp
   Math/fixed.cpp
   Math/LeastSquares.cpp
   Math/DiffFilter.cpp
   Math/Filter.cpp
   Math/ZeroFinder.cpp
   Math/KalmanFilter1d.cpp
   Math/SelfTimingKalmanFilter1d.cpp
   Input/InputDefaults.cpp)

set(xcsoar_c_sources
    Topography/shapelib/mapstring.c
    Topography/shapelib/mapbits.c
    Topography/shapelib/mapfile.c
    Topography/shapelib/mapprimitive.c
    Topography/shapelib/mapsearch.c
    Topography/shapelib/mapshape.c
    Topography/shapelib/maptree.c
    Topography/shapelib/mapxbase.c
    zzip/fetch.c
    zzip/file.c
    zzip/plugin.c
    zzip/zip.c
    zzip/stat.c)

set(xcsoar_sources ${xcsoar_cpp_sources}  # Do not bother with if(ALTAIR) here.
                   	Look/CustomFonts.cpp
	                  Dialogs/Settings/dlgConfigFonts.cpp
	                  Dialogs/Settings/FontEdit.cpp
                    ${xcsoar_c_sources})

if(HAVE_HTTP)
  set(xcsoar_sources ${xcsoar_sources}
	                   Renderer/NOAAListRenderer.cpp
                     Weather/NOAAGlue.cpp
                     Weather/METARParser.cpp
                     Weather/NOAAFormatter.cpp
                     Weather/NOAADownloader.cpp
                     Weather/NOAAStore.cpp
                     Weather/NOAAUpdater.cpp
                     Tracking/LiveTrack24.cpp)
endif(HAVE_HTTP)

set(GEN_DIR ${XCSoar_TOP_DIR}/generated)
set(TOOL_DIR ${XCSoar_TOP_DIR}/tools)
set(DATA_DIR ${XCSoar_TOP_DIR}/Data)
set(generated_dependencies ${GEN_DIR}/InputEvents_default.cpp
                           ${GEN_DIR}/InputEvents_altair.cpp
                           ${GEN_DIR}/InputEvents_Text2Event.cpp
                           ${GEN_DIR}/InputEvents_Text2GCE.cpp
                           ${GEN_DIR}/InputEvents_Text2NE.cpp
                           ${GEN_DIR}/Status_defaults.cpp)
set_source_files_properties(${generated_dependencies} PROPERTIES GENERATED 1)
set(version "-DXCSOAR_VERSION=\\\"6.8_preview6\\\"")
set(commit "-DGIT_COMMIT_ID=\\\"5d0eb5d\\\"")
include_directories(unix) # ./unix or ./wine
include_directories(. Engine)
include_directories(${GEN_DIR})
include_directories(SYSTEM SDL)
set(CMAKE_CXX_FLAGS "-fno-exceptions -fno-rtti -std=gnu++0x -fno-threadsafe-statics -fmerge-all-constants -fconserve-space -fno-operator-names -ffunction-sections -ffunction-sections -Wl,--gc-sections -ffast-math -ftree-vectorize -funsafe-loop-optimizations -fvisibility=hidden -finput-charset=utf-8 -Wall -Wextra -Wwrite-strings -Wcast-qual -Wpointer-arith -Wsign-compare -Wundef -Wmissing-declarations -Wredundant-decls -Wmissing-noreturn -Wno-unused-parameter -Wno-missing-field-initializers  -Wcast-align -DBOOST_NO_IOSTREAM -DBOOST_NO_IOSFWD -DBOOST_NO_STRINGSTREAM -DBOOST_NO_WSTREAMBUF -DHAVE_POSIX -DHAVE_STDINT_H -DHAVE_UNISTD_H -DHAVE_VASPRINTF -DRADIANS -DEYE_CANDY -DTESTING -DUSE_WGS84 -D_GNU_SOURCE=1 -D_REENTRANT -I/usr/include/SDL -DENABLE_SDL  -isystem /usr/include/freetype2 -DUSE_FREETYPE -DENABLE_OPENGL -DGL_GLEXT_PROTOTYPES -D_GNU_SOURCE=1 -D_REENTRANT -I/usr/include/SDL -DENABLE_SDL  -DENABLE_OPENGL -DGL_GLEXT_PROTOTYPES -D_GNU_SOURCE=1 -D_REENTRANT -DENABLE_SDL -DUSE_FREETYPE  -DENABLE_OPENGL -DGL_GLEXT_PROTOTYPES -m32 ${version} ${commit}")
add_executable(XCSoar ${xcsoar_sources})
add_dependencies(XCSoar gen_InputEvents_default
                        gen_InputEvents_altair
                        gen_InputEvents_Text2Event
                        gen_InputEvents_Text2GCE
                        gen_InputEvents_Text2NE)

# Allow 'make generated'
add_custom_target(generated ALL
                  DEPENDS ${generated_dependencies})

add_custom_command(OUTPUT ${GEN_DIR}/InputEvents_default.cpp
                   DEPENDS ${DATA_DIR}/Input/default.xci
                           ${TOOL_DIR}/xci2cpp.pl
                   COMMAND perl ${TOOL_DIR}/xci2cpp.pl ${DATA_DIR}/Input/default.xci > ${GEN_DIR}/InputEvents_default.cpp)
add_custom_target(gen_InputEvents_default DEPENDS ${GEN_DIR}/InputEvents_default.cpp)
add_custom_command(OUTPUT ${GEN_DIR}/InputEvents_altair.cpp
                   DEPENDS ${DATA_DIR}/Input/altair.xci
                           ${TOOL_DIR}/xci2cpp.pl
                   COMMAND perl ${TOOL_DIR}/xci2cpp.pl ${DATA_DIR}/Input/altair.xci > ${GEN_DIR}/InputEvents_altair.cpp)
add_custom_target(gen_InputEvents_altair DEPENDS ${GEN_DIR}/InputEvents_altair.cpp)
add_custom_command(OUTPUT ${GEN_DIR}/InputEvents_Text2Event.cpp
                   DEPENDS Input/InputEvents.hpp ${TOOL_DIR}/Text2Event.pl
                   COMMAND perl ${TOOL_DIR}/Text2Event.pl Input/InputEvents.hpp > ${GEN_DIR}/InputEvents_Text2Event.cpp)
add_custom_target(gen_InputEvents_Text2Event DEPENDS ${GEN_DIR}/InputEvents_Text2Event.cpp)
add_custom_command(OUTPUT ${GEN_DIR}/InputEvents_Text2GCE.cpp
                   DEPENDS Input/InputQueue.hpp ${TOOL_DIR}/Text2GCE.pl
                   COMMAND perl ${TOOL_DIR}/Text2GCE.pl Input/InputQueue.hpp > ${GEN_DIR}/InputEvents_Text2GCE.cpp)
add_custom_target(gen_InputEvents_Text2GCE DEPENDS ${GEN_DIR}/InputEvents_Text2GCE.cpp)
add_custom_command(OUTPUT ${GEN_DIR}/InputEvents_Text2NE.cpp
                   DEPENDS Input/InputQueue.hpp ${TOOL_DIR}/Text2NE.pl
                   COMMAND perl ${TOOL_DIR}/Text2NE.pl Input/InputQueue.hpp > ${GEN_DIR}/InputEvents_Text2NE.cpp)
add_custom_target(gen_InputEvents_Text2NE DEPENDS ${GEN_DIR}/InputEvents_Text2NE.cpp)
add_custom_command(OUTPUT ${GEN_DIR}/MathTables.h
                   DEPENDS ${TOOL_DIR}/GenerateSineTables
                   COMMAND ${TOOL_DIR}/GenerateSineTables > ${GEN_DIR}/MathTables.h)
add_custom_command(OUTPUT ${GEN_DIR}/Status_defaults.cpp
                   DEPENDS ${DATA_DIR}/Status/default.xcs ${TOOL_DIR}/xcs2cpp.pl
                   COMMAND ${TOOL_DIR}/xcs2cpp.pl ${DATA_DIR}/Status/default.xcs > ${GEN_DIR}/Status_defaults.cpp)

# Boost parameters - from build/libboost.mk
set(boost_dir ${CMAKE_HOME_DIRECTORY}/lib/boost)
set(boost_cxx_flags
    -DBOOST_NO_IOSTREAM
    -DBOOST_NO_IOSFWD
    -DBOOST_NO_STRINGSTREAM
    -DBOOST_NO_WSTREAMBUF
    -isystem ${boost_dir}/assert/include
    -isystem ${boost_dir}/core/include
    -isystem ${boost_dir}/detail/include
    -isystem ${boost_dir}/functional/include
    -isystem ${boost_dir}/function_types/include
    -isystem ${boost_dir}/integer/include
    -isystem ${boost_dir}/intrusive/include
    -isystem ${boost_dir}/move/include
    -isystem ${boost_dir}/mpl/include
    -isystem ${boost_dir}/preprocessor/include
    -isystem ${boost_dir}/static_assert/include
    -isystem ${boost_dir}/tti/include
    -isystem ${boost_dir}/type_traits/include
    -isystem ${boost_dir}/config/include
